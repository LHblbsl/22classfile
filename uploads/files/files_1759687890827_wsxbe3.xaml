<Window x:Class="testdemo.AvatarEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="头像编辑器" 
        Height="600" 
        Width="800"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterOwner"
        Background="White">

    <Window.Resources>
        <!-- 复制胶囊按钮样式 -->
        <Style x:Key="CapsuleButton" TargetType="Button">
            <Setter Property="Background" Value="#B00078D7"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Width" Value="80"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                            Background="{TemplateBinding Background}"
                            CornerRadius="15"
                            BorderThickness="0">
                            <ContentPresenter HorizontalAlignment="Center" 
                                          VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <!-- 鼠标悬停效果 -->
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#C00078D7"/>
                            </Trigger>
                            <!-- 按钮按下效果 -->
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#D00078D7"/>
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.95" ScaleY="0.95"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <Border Background="White" CornerRadius="15" Margin="20" BorderBrush="#800078D7" BorderThickness="2">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- 标题 -->
                <TextBlock Text="头像编辑器" 
                           FontSize="20" 
                           FontWeight="Bold" 
                           Foreground="#800078D7" 
                           HorizontalAlignment="Center" 
                           Margin="0,20"/>

                <!-- 按钮区域 -->
                <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,10">
                    <Button x:Name="HideAllButton" 
                            Content="隐藏全部" 
                            Style="{StaticResource CapsuleButton}" 
                            Margin="0,0,10,0"
                            Click="HideAllButton_Click"/>
                    <Button x:Name="ShowAllButton" 
                            Content="显示全部" 
                            Style="{StaticResource CapsuleButton}" 
                            Click="ShowAllButton_Click"/>
                </StackPanel>

                <!-- 学生头像列表 -->
                <ScrollViewer Grid.Row="1" Margin="20">
                    <ItemsControl x:Name="AvatarItemsControl">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Margin="0,5" Padding="10" Background="#F0F0F0" CornerRadius="10">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- 学生头像 -->
                                        <Image x:Name="StudentAvatar" 
                                               Width="50" 
                                               Height="50" 
                                               Margin="0,0,10,0"
                                               Source="{Binding Avatar}"/>

                                        <!-- 学生信息 -->
                                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding Name}" 
                                                       Foreground="#333333" 
                                                       FontWeight="Bold"/>
                                            <TextBlock Text="{Binding StudentId, StringFormat='学号: {0}'}" 
                                                       Foreground="#666666"/>
                                        </StackPanel>

                                        <!-- 隐藏按钮 -->
                                        <Button Grid.Column="2" 
                                                Content="隐藏头像" 
                                                Style="{StaticResource CapsuleButton}"
                                                Click="HideAvatarButton_Click"
                                                Tag="{Binding StudentId}"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </ScrollViewer>

                <!-- 应用按钮 -->
                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,20">
                    <Button x:Name="ApplyButton"
                            Content="应用更改" 
                            Style="{StaticResource CapsuleButton}" 
                            Margin="0,0,10,0"
                            Click="ApplyButton_Click"/>
                    <Button x:Name="CancelButton"
                            Content="取消" 
                            Style="{StaticResource CapsuleButton}" 
                            Click="CancelButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>